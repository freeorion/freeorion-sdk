From e14bcb6c6d7efd199e41402eb5f9ae1504b98649 Mon Sep 17 00:00:00 2001
From: Marcel Metz <mmetz@adrian-broher.net>
Date: Sun, 15 Apr 2018 20:25:24 +0200
Subject: [PATCH 14/14] Use python<major>.<minor> as executable output name

---
 cmake/python/CMakeLists.txt | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

diff --git a/cmake/python/CMakeLists.txt b/cmake/python/CMakeLists.txt
index 83e221a..450c732 100644
--- a/cmake/python/CMakeLists.txt
+++ b/cmake/python/CMakeLists.txt
@@ -6,9 +6,11 @@ set(PYTHON_SOURCES
 )
 
 add_executable(python ${PYTHON_SOURCES})
-set_property(
-    TARGET python
-    PROPERTY RUNTIME_OUTPUT_DIRECTORY ${BIN_BUILD_DIR}
+set_target_properties(
+    python
+    PROPERTIES
+    RUNTIME_OUTPUT_DIRECTORY ${BIN_BUILD_DIR}
+    OUTPUT_NAME python${PY_VERSION_MAJOR}.${PY_VERSION_MINOR}
     )
 target_compile_definitions(python PRIVATE Py_BUILD_CORE)
 add_definitions(-DPy_BUILD_CORE)
@@ -89,10 +91,10 @@ if(UNIX AND NOT CMAKE_CROSSCOMPILING)
   install(CODE
 "message(STATUS \"Creating Python executable symlinks...\")
 execute_process(
-  COMMAND \${CMAKE_COMMAND} -E create_symlink python
+  COMMAND \${CMAKE_COMMAND} -E create_symlink python${PY_VERSION_MAJOR}.${PY_VERSION_MINOR}
     python${PY_VERSION_MAJOR}
-  COMMAND \${CMAKE_COMMAND} -E create_symlink python
-    python${PY_VERSION_MAJOR}.${PY_VERSION_MINOR}
+  COMMAND \${CMAKE_COMMAND} -E create_symlink python${PY_VERSION_MAJOR}
+    python
   WORKING_DIRECTORY
     \$ENV{DESTDIR}\${CMAKE_INSTALL_PREFIX}/${BIN_INSTALL_DIR}
   )"
-- 
2.35.1

