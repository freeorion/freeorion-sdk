From 569af88461fa28f54b28c2bcd5d37dc27b85c7b4 Mon Sep 17 00:00:00 2001
From: Marcel Metz <mmetz@adrian-broher.net>
Date: Mon, 21 Mar 2016 20:39:08 +0100
Subject: [PATCH] Don't export python cmake targets

---
 CMakeLists.txt                 | 6 ------
 cmake/libpython/CMakeLists.txt | 2 +-
 cmake/python/CMakeLists.txt    | 2 +-
 3 files changed, 2 insertions(+), 8 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index f561804..2f395c1 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -555,12 +555,6 @@ write_basic_package_version_file(
 )
 
 # Install 'PythonTargets.cmake', 'PythonConfig.cmake' and 'PythonConfigVersion.cmake
-install(EXPORT PythonTargets FILE PythonTargets.cmake DESTINATION ${CONFIG_INSTALL_DIR})
-
-install(
-    FILES ${python_install_config} ${python_config_version}
-    DESTINATION ${CONFIG_INSTALL_DIR} COMPONENT Development
-)
 
 # Install License
 set(license_destination ${PYTHONHOME})
diff --git a/cmake/libpython/CMakeLists.txt b/cmake/libpython/CMakeLists.txt
index ca4e0b5..5896d93 100644
--- a/cmake/libpython/CMakeLists.txt
+++ b/cmake/libpython/CMakeLists.txt
@@ -461,7 +461,7 @@ function(add_libpython name type)
     # Export target
     set_property(GLOBAL APPEND PROPERTY PYTHON_TARGETS ${name})
 
-    install(TARGETS ${name} EXPORT PythonTargets
+    install(TARGETS ${name}
         ARCHIVE DESTINATION ${LIBPYTHON_ARCHIVEDIR}
         LIBRARY DESTINATION ${LIBPYTHON_LIBDIR}
         RUNTIME DESTINATION ${LIBPYTHON_LIBDIR}
diff --git a/cmake/python/CMakeLists.txt b/cmake/python/CMakeLists.txt
index 8f9df41..2031eda 100644
--- a/cmake/python/CMakeLists.txt
+++ b/cmake/python/CMakeLists.txt
@@ -27,7 +27,7 @@ endif()
 # Export target
 set_property(GLOBAL APPEND PROPERTY PYTHON_TARGETS python)
 
-install(TARGETS python EXPORT PythonTargets RUNTIME DESTINATION ${BIN_INSTALL_DIR} COMPONENT Runtime)
+install(TARGETS python RUNTIME DESTINATION ${BIN_INSTALL_DIR} COMPONENT Runtime)
 
 # See "is_python_build()" in sysconfig.py
 add_custom_command(TARGET python PRE_BUILD
-- 
2.7.4

