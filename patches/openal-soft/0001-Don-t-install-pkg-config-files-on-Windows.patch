From c762d143906d6907daf5967e79a8d22090e15e05 Mon Sep 17 00:00:00 2001
From: Marcel Metz <mmetz@adrian-broher.net>
Date: Thu, 10 Mar 2016 12:43:18 +0100
Subject: [PATCH] Don't install pkg-config files on Windows

Except if the build system is Cygwin.
---
 CMakeLists.txt | 17 +++++++++++------
 1 file changed, 11 insertions(+), 6 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index a871f4cf..e5b836cd 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1530,10 +1530,13 @@ SET(PACKAGE_VERSION "${LIB_VERSION}")
 configure_file(
     "${OpenAL_SOURCE_DIR}/config_simd.h.in"
     "${OpenAL_BINARY_DIR}/config_simd.h")
-configure_file(
-    "${OpenAL_SOURCE_DIR}/openal.pc.in"
-    "${OpenAL_BINARY_DIR}/openal.pc"
-    @ONLY)
+
+IF(NOT WIN32 OR CYGWIN)
+    CONFIGURE_FILE(
+        "${OpenAL_SOURCE_DIR}/openal.pc.in"
+        "${OpenAL_BINARY_DIR}/openal.pc"
+        @ONLY)
+ENDIF()
 
 
 set(MODULES_OBJS )
@@ -1869,10 +1872,12 @@ IF(ALSOFT_INSTALL)
         FILE OpenALTargets.cmake)
     install(DIRECTORY include/AL
         DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})
-    install(FILES "${OpenAL_BINARY_DIR}/openal.pc"
-        DESTINATION "${CMAKE_INSTALL_LIBDIR}/pkgconfig")
-    install(FILES "${OpenAL_BINARY_DIR}/OpenALConfig.cmake"
-        DESTINATION "${CMAKE_INSTALL_LIBDIR}/cmake/OpenAL")
+    IF(NOT WIN32 OR CYGWIN)
+        INSTALL(FILES "${OpenAL_BINARY_DIR}/openal.pc"
+                DESTINATION "${CMAKE_INSTALL_LIBDIR}/pkgconfig")
+        INSTALL(FILES "${OpenAL_BINARY_DIR}/OpenALConfig.cmake"
+                DESTINATION "${CMAKE_INSTALL_LIBDIR}/cmake/OpenAL")
+    ENDIF()
     if(TARGET soft_oal)
         install(TARGETS soft_oal)
     endif()
-- 
2.14.3

